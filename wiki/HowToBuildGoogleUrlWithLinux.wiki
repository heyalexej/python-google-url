#summary How to build Google URL library with Linux
#labels Featured,Phase-Deploy

= Introduction =

How to build Google URL library with Linux

= Details =

  # Checkout the latest source from SVN
{{{
$svn checkout http://google-url.googlecode.com/svn/trunk/ googleurl
}}}
  # Create a [http://code.google.com/p/python-google-url/source/browse/trunk/google-url/linux/src/SConstruct SConstruct] file int the googleurl/src folder
{{{
env = Environment(CPPPATH=["..", "../../"])

source = [str(file) for file in Glob('*.cc')]

for file in Glob('*test*.cc'):
  source.remove(str(file))

env.SharedLibrary('googleurl', source)
env.StaticLibrary('googleurl', source)
}}}
  # Modify string16.cc, logging.h and basictypes.h in googleurl/base folder for compatibility
{{{
// string16.cc:31
#include <string.h>

// string16.h:54
#include <cstdio>

// logging.h:10
#ifdef WIN32
#include <tchar.h>
#else
#define TCHAR char
#endif

// basictypes.h:9
typedef unsigned long long uint64;
}}}
  # Install [http://www.scons.org/ SCons] and run the scons command in the googleurl/src folder
  # export a environment variable GOOGLE_URL_HOME point to the googleurl folder
{{{
$export GOOGLE_URL_HOME=`pwd`/googleurl
}}}
  # build and install the python extension
{{{
$cd `pwd`/googleurl
$scons 
$cd ../
$svn checkout http://python-google-url.googlecode.com/svn/trunk/ python-google-url
$cd python-google-url
$python setup.py build
$sudo python setup.py install
}}}
  # try to use it
{{{
$python
Python 2.6.1 (r261:67515, Apr 12 2009, 03:51:25) 
[GCC 4.3.2] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import gurl
>>> u = gurl.Url('http://code.google.com/p/python-google-url/')
>>> str(u)
}}}